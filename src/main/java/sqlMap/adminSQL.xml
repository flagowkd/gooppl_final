<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="yong.admin">
  	<update id="loginRecode" parameterType="int">
  		UPDATE 
  			admin 
  		SET
  			last_connection_date = sysdate
  		WHERE member_idx = #{member_idx}
  	</update>
  	<select id="adminMemberInfo" parameterType="String" resultType="goo.member.model.MemberDTO">
  		SELECT
  			*
  		FROM member
  		WHERE goo_id = #{goo_id}
  	</select>
  	<select id="allAdminMemberInfo" resultType="goo.member.model.MemberDTO">
  		SELECT
  			*
  		FROM member
  		WHERE member_type = 'A'
  	</select>
  	<select id="adminInfo" parameterType="String" resultType="goo.admin.model.AdminDTO">
 		SELECT
  			a.*
  		FROM admin a, member m
  		WHERE a.member_idx = m.member_idx
  		AND	m.goo_id = #{goo_id}
  	</select>
  	<select id="allAdminInfo" resultType="goo.admin.model.AdminDTO">
  		SELECT
  			*
  		FROM admin
  	</select>
  	<select id="get_site_settings" resultType="goo.admin.model.SiteSettingsDTO">
  		SELECT 
  			*
  		FROM site_settings
  	</select>
  	<update id="site_settings_update" parameterType="goo.admin.model.SiteSettingsDTO">
  		UPDATE
  			site_settings
  		SET
  			  web_browser_title = #{web_browser_title}
  			, keyword = #{keyword} 
  			, description = #{description}
  			
  	</update>
  	<insert id="adminInsert1" parameterType="goo.member.model.MemberDTO">
  		INSERT INTO
  			member(member_idx, goo_id, pwd, nickname, join_date, del, member_type)
  		VALUES(member_idx.nextval
  				, #{goo_id}
  				, #{pwd}
		  		, #{nickname}
		  		, sysdate
		  		, 'N'
		  		, 'A')
  	</insert>
  	<insert id="adminInsert2" parameterType="goo.admin.model.AdminDTO">
  		INSERT INTO
  			admin
  		VALUES(admin_idx.nextval
  				, #{member_idx}
  				, #{admin_phone}
  				, #{admin_tel}
  				, #{admin_addr}
  				, sysdate)
  	</insert>
  	<update id="adminUpdate1" parameterType="goo.member.model.MemberDTO">
  		UPDATE
  			member
  		SET 
  			  pwd = #{pwd}
  			, nickname = #{nickname}
  		WHERE member_idx = #{member_idx}
  	</update>
  	<update id="adminUpdate2" parameterType="goo.admin.model.AdminDTO">
  		UPDATE
  			admin
  		SET 
  			  admin_tel = #{admin_tel}
  			, admin_phone = #{admin_phone}
  			, admin_addr = #{admin_addr}
  		WHERE member_idx = #{member_idx}
  	</update>
  </mapper>