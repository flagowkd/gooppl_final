<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="goo.ad">
	<insert id="startAD" parameterType="goo.ad.model.AdDTO">
	INSERT INTO
		AD_INFO
	values(
		ad_info_idx.nextval,
		#{owner_idx},
		#{imp_uid},
		#{ad_period},
		sysdate,
		SYSDATE + #{ad_period}*30,
		#{ad_state}
	)
	</insert>
	<delete id="admin_refundAd_Del" parameterType="String">
		DELETE FROM
			AD_INFO
		WHERE
			IMP_UID = #{imp_uid}
	</delete>
	<select id="getOwnerIdx" resultType="Integer">
		SELECT 
			owner_idx 
		FROM 
			AD_INFO 
		WHERE 
			ad_state='광고중'
	</select>
</mapper>