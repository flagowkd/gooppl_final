<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="goo.owner">
	<insert id="addOwnerInfo" parameterType="goo.owner.model.OwnerDTO">
	insert into
		owner_info
	values(
		owner_info_idx.nextval,
		#{member_idx},
		#{title},
		#{business_number},
		#{name},
		#{email},
		#{business_tel},
		#{tel},
		#{contenttype},
		#{firstimg},
		#{addr},
		#{detailed_addr},
		#{ad_content},
		#{mapx},
		#{mapy},
		#{areacode},
		#{sigungucode},
		#{state}
	)
	</insert>
	<select id="ckOwnerInfo" parameterType="Integer" resultType="goo.owner.model.OwnerDTO">
		select
			*
		from
			owner_info
		where
			member_idx=#{member_idx}
	</select>
	<select id="totalOwnerAppli" resultType="integer">
  		SELECT
  			count(*)
  		FROM
  			OWNER_INFO
  		WHERE
  			STATE = '대기'
  	</select>
  	<select id="allOwnerAppliInfo" parameterType="Map" resultType="goo.owner.model.OwnerDTO">
  		SELECT * FROM	
			(SELECT rownum AS rnum, a.* FROM
			(SELECT * FROM OWNER_INFO WHERE state = '대기' ORDER BY OWNER_IDX ASC)a)b
		WHERE rnum<![CDATA[>=]]>#{start} and rnum<![CDATA[<=]]>#{end}
  	</select>
  	<select id="ownerInfo" parameterType="Integer" resultType="goo.owner.model.OwnerDTO">
		select
			*
		from
			owner_info
		where
			owner_idx=#{owner_idx}
	</select>
</mapper>